[gd_scene format=3 uid="uid://vv0hc5560uoq"]

[ext_resource type="Script" uid="uid://m13l2ebd46k4" path="res://camera_3d.gd" id="1_vu4n5"]
[ext_resource type="Script" uid="uid://dpu2bs8hn0q6g" path="res://test_wordl/character_body_3d.gd" id="1_xvuwt"]
[ext_resource type="PackedScene" uid="uid://bp6kmdde24ebj" path="res://ModularGun/modular_gun.tscn" id="3_npll0"]
[ext_resource type="PackedScene" uid="uid://duhsxofnwbc06" path="res://ModularGun/GunMods/barrels/shotgun_barrel.tscn" id="5_dra23"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xvuwt"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_npll0"]
sky_material = SubResource("ProceduralSkyMaterial_xvuwt")

[sub_resource type="Environment" id="Environment_73cxh"]
background_mode = 2
sky = SubResource("Sky_npll0")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xvuwt"]
radius = 0.59814453
height = 2.1054688

[sub_resource type="CapsuleMesh" id="CapsuleMesh_npll0"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_npll0"]
height = 2.3339844
radius = 5.9731445

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_73cxh"]
albedo_color = Color(1, 1, 0.7137255, 1)

[node name="testworld" type="Node3D" unique_id=558731989]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=128210527]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=106072525]
environment = SubResource("Environment_73cxh")

[node name="CharacterBody3D" type="CharacterBody3D" parent="." unique_id=802656556]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7581341, 0)
collision_layer = 16
collision_mask = 25
script = ExtResource("1_xvuwt")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D" unique_id=1986715696]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9472656, 0)
shape = SubResource("CapsuleShape3D_xvuwt")

[node name="MeshInstance3D" type="MeshInstance3D" parent="CharacterBody3D" unique_id=725379215]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
mesh = SubResource("CapsuleMesh_npll0")

[node name="Camera3D2" type="Camera3D" parent="CharacterBody3D" unique_id=1760598577 node_paths=PackedStringArray("marker_3d", "target_character", "gun_pivot")]
transform = Transform3D(1, 0, 0, 0, -2.9802322e-08, 1, 0, -1, -2.9802322e-08, 0, 9.802805, -0.5453234)
current = true
fov = 70.0
script = ExtResource("1_vu4n5")
marker_3d = NodePath("../../AimMarker")
target_character = NodePath("..")
gun_pivot = NodePath("../WeaponHolder")

[node name="WeaponHolder" type="Node3D" parent="CharacterBody3D" unique_id=1949064089]

[node name="ModularGun" parent="CharacterBody3D/WeaponHolder" unique_id=1050853463 instance=ExtResource("3_npll0")]
transform = Transform3D(0.36, 0, 0, 0, 0.36, 0, 0, 0, 0.36, 1.037, 0.857, -0.529)

[node name="PickupRange" type="Area3D" parent="CharacterBody3D" unique_id=584651386]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.7581341, 0)
collision_layer = 0
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D/PickupRange" unique_id=964043717]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8169315, 0)
shape = SubResource("CylinderShape3D_npll0")

[node name="CSGBox3D" type="CSGBox3D" parent="." unique_id=444753431]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.40478516, 0)
use_collision = true
size = Vector3(43.060547, 0.19042969, 35.88672)
material = SubResource("StandardMaterial3D_73cxh")

[node name="CSGBox3D" type="CSGBox3D" parent="CSGBox3D" unique_id=1699294275]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.6683216, 1.7036743, 5.962797)
size = Vector3(1, 4.4073486, 3.9799805)

[node name="AimMarker" type="Marker3D" parent="." unique_id=431403601]
transform = Transform3D(1, 0, 0, 0, -2.9802322e-08, 1, 0, -1, -2.9802322e-08, 0.38481915, 6.3809376, -1.4696848)

[node name="shotgun_barrel" parent="." unique_id=1597230979 instance=ExtResource("5_dra23")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.967827, 0.39636135, -4.350404)

[node name="eq" type="CanvasLayer" parent="." unique_id=257288441]

[node name="Panel" type="Panel" parent="eq" unique_id=1646167733]
custom_minimum_size = Vector2(300, 400)
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="GridContainer" type="GridContainer" parent="eq/Panel" unique_id=341505077]
modulate = Color(1, 0.25490198, 1, 1)
custom_minimum_size = Vector2(250, 350)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
columns = 4

[node name="Panel" type="Panel" parent="eq/Panel/GridContainer" unique_id=1358311226]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2

[node name="Label" type="Label" parent="eq/Panel/GridContainer/Panel" unique_id=663736610]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "text"
horizontal_alignment = 1
vertical_alignment = 3

[connection signal="body_entered" from="CharacterBody3D/PickupRange" to="CharacterBody3D" method="_on_pickup_range_body_entered"]
